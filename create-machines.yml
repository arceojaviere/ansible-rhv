- name: "Cloud machine creation"
  hosts: "all"
  tasks:
    - name: "Authenticating in RHV"
      ovirt_auth:
        url: "https://rhevm.lab/ovirt-engine/api"
        username: admin@internal
        password: safepassword
        insecure: yes
    - name: "Creating virtual machine"
      ovirt_vms:
        auth: "{{ ovirt_auth }}"
        name: "AutomaticVm"
        description: "Automatically generated VM"
        cluster: "TestCluster"
        cpu_cores: 1
        cpu_sockets: 1
        memory: "500MiB"
        memory_guaranteed: "500MiB"
        nics:
          - name: "main"
            profile_name: "ovirtmgmt"
        operating_system: "rhel_7x64"
        state: "present"
        type: "server"
